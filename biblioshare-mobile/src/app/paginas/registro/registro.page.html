<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Registrar</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Criar conta</ion-card-title>
      <ion-card-subtitle>Defina seu usuário e senha.</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="formulario" (ngSubmit)="registrar()">
        <ion-item lines="full">
          <ion-label position="floating">Usuário</ion-label>
          <ion-input formControlName="username" autocomplete="username"></ion-input>
        </ion-item>
        <ion-note
          color="danger"
          *ngIf="username?.invalid && (username?.dirty || username?.touched)"
        >
          Informe um nome de usuário com pelo menos 3 caracteres.
        </ion-note>

        <ion-item lines="full" class="ion-margin-top">
          <ion-label position="floating">E-mail</ion-label>
          <ion-input
            type="email"
            formControlName="email"
            autocomplete="email"
            inputmode="email"
          ></ion-input>
        </ion-item>
        <ion-note
          color="danger"
          *ngIf="email?.invalid && (email?.dirty || email?.touched)"
        >
          Informe um e-mail válido.
        </ion-note>

        <ion-item lines="full" class="ion-margin-top">
          <ion-label position="floating">Senha</ion-label>
          <ion-input
            type="password"
            formControlName="senha"
            autocomplete="new-password"
          ></ion-input>
        </ion-item>
        <ion-note
          color="danger"
          *ngIf="senha?.invalid && (senha?.dirty || senha?.touched)"
        >
          A senha deve ter pelo menos 6 caracteres.
        </ion-note>

        <ion-item lines="full" class="ion-margin-top">
          <ion-label position="floating">Confirmar senha</ion-label>
          <ion-input
            type="password"
            formControlName="confirmarSenha"
            autocomplete="new-password"
          ></ion-input>
        </ion-item>
        <ion-note
          color="danger"
          *ngIf="confirmarSenha?.errors?.diferentes && (confirmarSenha?.dirty || confirmarSenha?.touched)"
        >
          As senhas precisam ser iguais.
        </ion-note>

        <ion-button
          type="submit"
          color="primary"
          expand="block"
          class="ion-margin-top"
          [disabled]="carregando"
        >
          {{ carregando ? 'Registrando...' : 'Registrar' }}
        </ion-button>
        <ion-button
          type="button"
          fill="clear"
          expand="block"
          color="medium"
          (click)="irParaLogin()"
        >
          Já tenho conta
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>

